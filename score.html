<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>CBT-Practice Result</title>

<script>
window.MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]}};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<style>

body{
font-family:Arial,Helvetica,sans-serif;
background:#eef2f7;
padding:20px;
margin:0;
}

.header{background:#0b3d91;color:#fff;padding:12px;margin-bottom:15px;}

.questionBox{
border:1px solid #ddd;
padding:12px;
margin-bottom:14px;
border-radius:6px;
background:#fff;
}

.option{padding:6px 10px;margin:4px 0;border-radius:4px;}
.optCorrect{background:#2ecc71;color:#fff;}
.optWrong{background:#e74c3c;color:#fff;}
.optUser{outline:2px solid #0b3d91;}

svg{max-width:100%;height:auto;}

</style>
</head>

<body>

<div class="header">
<h2>CBT-Practice Result & Full Review</h2>
</div>

<div id="questionsReview"></div>

<script>

let data = JSON.parse(localStorage.getItem("exam_result"));
let reviewHTML="";

Object.keys(data.sections).forEach(section=>{
data.sections[section].forEach((q,i)=>{

let optionsHTML="";

q.options.forEach((op,idx)=>{
let optClass="option";
if(idx===q.correct) optClass+=" optCorrect";
if(q.answer===idx && q.answer!==q.correct) optClass+=" optWrong";
if(q.answer===idx) optClass+=" optUser";

optionsHTML+=`<div class="${optClass}">
${String.fromCharCode(65+idx)}. ${op}
</div>`;
});

reviewHTML+=`
<div class="questionBox">

<b>${section} - Question ${i+1}</b>
<br><br>

<div>${q.q}</div>

<br>

${optionsHTML}

<br>

<div><b>Solution:</b> ${q.solution}</div>

</div>
`;

});
});

questionsReview.innerHTML=reviewHTML;

/* RENDER LATEX + SVG */
MathJax.typesetPromise();

</script>
</body>
</html>
